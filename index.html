<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>SISTEM PENCATATAN KEUANGAN RT 07</title>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<style>

.cb-group {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-weight: 600;
  user-select: none;
}

.cb-group input {
  display: none;
}

.cb-box {
  width: 22px;
  height: 22px;
  border-radius: 6px;
  border: 2px solid #999;
  position: relative;
  transition: 0.25s ease;
}

.cb-box::after {
  content: "âœ”";
  position: absolute;
  top: -1px;
  left: 4px;
  font-size: 16px;
  color: white;
  opacity: 0;
  transform: scale(0.5);
  transition: 0.2s ease;
}

.cb-group input:checked + .cb-box::after {
  opacity: 1;
  transform: scale(1);
}

.cb-kas input:checked + .cb-box {
  background: #22c55e;
  border-color: #16a34a;
}

.cb-sampah input:checked + .cb-box {
  background: #0ea5e9;
  border-color: #0284c7;
}

.cb-kematian input:checked + .cb-box {
  background: #ef4444;
  border-color: #b91c1c;
}

.cb-kredit input:checked + .cb-box {
  background: #f97316;
  border-color: #ea580c;
}

.cb-group:hover .cb-box {
  box-shadow: 0 0 8px rgba(0,0,0,0.2);
}

/* ================= 3D TITLE EFFECT ================= */
.judul-app {
  text-align: center;
  font-size: 36px;
  font-weight: 900;
  letter-spacing: 2px;
  color: #1f2933;
  position: relative;
  perspective: 800px;
  animation: titleFloat 3s ease-in-out infinite;
}

.judul-app::after {
  content: "";
  display: block;
  width: 160px;
  height: 6px;
  margin: 10px auto 0;
  border-radius: 20px;
  background: linear-gradient(90deg, #22c55e, #3b82f6, #a855f7);
  box-shadow: 0 0 15px rgba(59,130,246,.8);
}

/* animasi naik turun */
@keyframes titleFloat {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* ================= DASHBOARD 3D ================= */
.dashboard {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
  gap: 20px;
  perspective: 1000px;
}

.card {
  position: relative;
  padding: 22px;
  border-radius: 18px;
  color: white;
  font-weight: bold;
  text-align: center;
  font-size: 22px;
  transform-style: preserve-3d;
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  box-shadow:
    0 10px 25px rgba(0,0,0,0.35),
    inset 0 2px 4px rgba(255,255,255,0.25);
}

/* efek mengambang */
.card:hover {
  transform: translateY(-10px) rotateX(6deg);
  box-shadow:
    0 20px 40px rgba(0,0,0,0.45),
    inset 0 2px 6px rgba(255,255,255,0.3);
}

/* angka dashboard */
.card span {
  display: block;
  font-size: 34px;
  margin-top: 8px;
  text-shadow: 0 3px 6px rgba(0,0,0,.4);
}

/* efek kilau */
.card::before {
  content: "";
  position: absolute;
  top: -40%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    120deg,
    transparent,
    rgba(255,255,255,.25),
    transparent
  );
  transform: rotate(25deg);
  transition: 0.6s;
  opacity: 0;
}

.card:hover::before {
  opacity: 1;
  transform: rotate(25deg) translateX(60%);
}

/* warna */
.kas{background:linear-gradient(135deg,#22c55e,#16a34a);}
.sampah{background:linear-gradient(135deg,#0ea5e9,#0284c7);}
.kematian{background:linear-gradient(135deg,#ef4444,#b91c1c);}
.insidentil{background:linear-gradient(135deg,#a855f7,#7c3aed);}
.total{background:linear-gradient(135deg,#111827,#374151);}

body{font-family:Arial;background:#f4f6f8;padding:20px}
.hidden{display:none}

/* JUDUL */
.judul-app{
  text-align:center;font-size:34px;font-weight:900;
  margin-bottom:25px;
  animation:fadeDown 1s ease-out;
}
@keyframes fadeDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1}}

/* BUTTON */
input,button{padding:8px;margin:4px 0;border-radius:6px;border:1px solid #ccc}
button{font-weight:bold;cursor:pointer}
.btn-primary{background:#2563eb;color:white}
.btn-success{background:#16a34a;color:white}
.btn-danger{background:#dc2626;color:white}
.btn-warning{background:#f59e0b;color:white}

/* DASHBOARD */
.dashboard{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:10px;margin:18px 0;
}
.card{
  padding:22px;border-radius:18px;color:white;font-weight:bold;
  text-align:center;font-size:24px;transition:.0.1s;
}
.card:hover{transform:translateY(-6px) scale(1.04)}
.card span{display:block;font-size:30px;margin-top:4px;font-weight:900}

.kas{background:#16a34a}
.sampah{background:#0284c7}
.kematian{background:#b91c1c}
.insidentil{background:#7c3aed}
.kredit{background:#ea580c}
.total{background:#111827}

/* TABLE */
.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:20px;
}
.table-wrapper{max-height:400px;overflow-y:auto;margin-top:10px}
table{width:100%;border-collapse:collapse;background:white}
th,td{border:1px solid #ddd;padding:4px;text-align:center}
thead th{position:sticky;top:0;background:#22c55e;color:white}

/* LOGIN */
.login-box{
  max-width:350px;margin:120px auto;background:white;
  padding:25px;border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
.form-grid input {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.form-grid {
  gap: 100px;
}
/* ===== UKURAN INPUT FIELD ===== */

/* Nama Warga */
#nama {
  width: 100%;
  height: 15px;
  font-size: 17px;
}

/* Nominal Kredit */
#kredit {
  width: 100%;
  height: 42px;
  font-size: 17px;
}

/* Insidentil */
#insidentil {
  width: 100%;
  height: 42px;
  font-size: 17px;
}

/* Keterangan */
#keterangan {
  width: 100%;
  height: 40px;
  font-size: 17px;
}

/* Supaya rapi */
.form-grid input {
  padding: 12px 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
input[type="date"] {
  position: relative;
  z-index: 10;
  pointer-events: auto;
  background-color: #fff;
}

.form-grid {
  position: relative;
  z-index: 1;
}

.cb-group {
  position: relative;
  z-index: 0;
}
/* === KECILKAN TINGGI INPUT FORM === */
input[type="text"],
input[type="number"],
input[type="date"] {
  padding: 6px 8px;       /* atas-bawah | kiri-kanan */
  margin: 2px 0;          /* jarak antar field */
  height: 34px;           /* tinggi input */
  font-size: 14px;
  box-sizing: border-box;
}

/* khusus field keterangan agar sedikit lebih panjang */
#keterangan {
  height: 18px;
}

/* agar grid tidak terlalu renggang */
.form-grid {
  row-gap: 25px;
}
.bulan-wrapper {
  margin: 15px 0 25px 0; /* atas kanan bawah kiri */
}

.bulan-wrapper input {
  margin-top: 6px;
  padding: 6px 10px;
}
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}
.top-bar {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 15px;
}

.right-user {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
}

.user-info {
  font-weight: 600;
  color: #1f2933;
}
/* Jarak khusus untuk pilih bulan */
.bulan-wrapper {
  margin-top: 25px;      /* jarak dari atas */
  margin-bottom: 80px;   /* JARAK KE DASHBOARD (DIPERLEBAR) */
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* agar input lebih rapi */
.bulan-wrapper input {
  width: 200px;
  padding: 8px 10px;
  font-size: 15px;
}

</style>
</head>

<body>

<div id="loginBox" class="login-box">
  <h2>LOGIN SISTEM RT</h2>
  <input id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button class="btn-primary" onclick="login()">Login</button>
</div>

<div id="app" class="hidden">

<h1 class="judul-app">SISTEM PENCATATAN KEUANGAN RT 07</h1>

<div class="top-bar">
  <div class="right-user">
    <div class="user-info">Login sebagai: <b id="userAktif"></b></div>
    <button class="btn-danger" onclick="logout()">Logout</button>
  </div>
</div>




<div class="bulan-wrapper">
  <label>Pilih Bulan</label>
  <input type="month" id="bulan">
</div>


<div class="dashboard">
  <div class="card kas">Kas<span id="tKas">0</span></div>
  <div class="card sampah">Sampah<span id="tSampah">0</span></div>
  <div class="card kematian">Kematian<span id="tKematian">0</span></div>
  <div class="card insidentil">Insidentil<span id="tInsidentil">0</span></div>
  <div class="card kredit">Kredit<span id="tKredit">0</span></div>
  <div class="card total">Total<span id="tAll">0</span></div>
</div>

<div class="form-grid">

  <input id="nama" placeholder="Nama Warga">
  <input type="date" id="tanggal">

  <!-- CHECKBOX -->
  <label class="cb-group cb-kas">
    <input type="checkbox" id="cbKas" checked>
    <span class="cb-box"></span>
    Kas (5.000)
  </label>

  <label class="cb-group cb-sampah">
    <input type="checkbox" id="cbSampah" checked>
    <span class="cb-box"></span>
    Sampah (15.000)
  </label>

  <label class="cb-group cb-kematian">
    <input type="checkbox" id="cbKematian" checked>
    <span class="cb-box"></span>
    Kematian (5.000)
  </label>

  <label class="cb-group cb-kredit">
    <input type="checkbox" id="cbKredit">
    <span class="cb-box"></span>
    Kredit
  </label>
  <!-- INPUT TAMBAHAN (DIPINDAH KE BAWAH) -->
  <input type="number" id="kredit" placeholder="Nominal Kredit">
  <input type="number" id="insidentil" placeholder="Insidentil">
  <input id="keterangan" placeholder="Keterangan">

</div>


<button class="btn-success" onclick="simpan()">Simpan</button>

<hr>
<input id="searchInput" placeholder="Cari...">

<div class="table-wrapper">
<table>
<thead>
<tr>
  <th>No</th><th>Nama</th><th>Tanggal</th>
  <th>Kas</th><th>Sampah</th><th>Kematian</th>
  <th>Insidentil</th><th>Kredit</th>
  <th>Keterangan</th><th>Total</th><th>Aksi</th>
</tr>
</thead>
<tbody id="tabel"></tbody>
</table>
</div>

</div>

<script>
const USER="admin", PASS="12345";
const KAS=5000, SAMPAH=15000, KEMATIAN=5000;

let data=[];
let editId=null;

function rupiah(x){return (Number(x)||0).toLocaleString("id-ID");}

function login(){
  if(username.value===USER && password.value===PASS){
    localStorage.setItem("loginRT",USER);
    tampilkanApp();
  }else alert("Login salah!");
}
function logout(){localStorage.removeItem("loginRT");location.reload();}

function tampilkanApp(){
  if(localStorage.getItem("loginRT")){
    loginBox.style.display="none";
    app.classList.remove("hidden");
    userAktif.innerText=USER;

    const now=new Date();
    bulan.value=now.toISOString().slice(0,7);
    tanggal.value=now.toISOString().slice(0,10);

    data=JSON.parse(localStorage.getItem("dataRT"))||[];
    render();
  }
}

function resetForm(){
  nama.value=""; tanggal.value=new Date().toISOString().slice(0,10);
  insidentil.value=""; kredit.value=""; keterangan.value="";
  cbKas.checked=cbSampah.checked=cbKematian.checked=true;
  cbKredit.checked=false;
  editId=null;
}

function simpan(){
  if(!nama.value||!tanggal.value)return alert("Lengkapi data!");

  const obj={
    id: editId ?? Date.now(),
    bulan: bulan.value,
    nama: nama.value,
    tanggal: tanggal.value,
    kas: cbKas.checked?KAS:0,
    sampah: cbSampah.checked?SAMPAH:0,
    kematian: cbKematian.checked?KEMATIAN:0,
    insidentil:+insidentil.value||0,
    kredit: cbKredit.checked?+kredit.value||0:0,
    keterangan:keterangan.value
  };

  if(editId){
    data=data.map(d=>d.id===editId?obj:d);
  }else{
    data.push(obj);
  }

  localStorage.setItem("dataRT",JSON.stringify(data));
  resetForm();
  render();
}

function edit(id){
  const d=data.find(x=>x.id===id);
  if(!d)return;
  editId=id;
  nama.value=d.nama;
  tanggal.value=d.tanggal;
  cbKas.checked=d.kas>0;
  cbSampah.checked=d.sampah>0;
  cbKematian.checked=d.kematian>0;
  cbKredit.checked=d.kredit>0;
  kredit.value=d.kredit;
  insidentil.value=d.insidentil;
  keterangan.value=d.keterangan;
}

function hapus(id){
  if(confirm("Hapus data?")){
    data=data.filter(d=>d.id!==id);
    localStorage.setItem("dataRT",JSON.stringify(data));
    render();
  }
}

function render(){
  let html="",tk=0,ts=0,tm=0,ti=0,tkred=0;
  const key=(searchInput.value||"").toLowerCase();

  data
  .filter(d=>d.bulan===bulan.value)
  .filter(d=>(d.nama+d.keterangan).toLowerCase().includes(key))
  .forEach((d,i)=>{
    tk+=d.kas; ts+=d.sampah; tm+=d.kematian;
    ti+=d.insidentil; tkred+=d.kredit;

    html+=`
    <tr>
      <td>${i+1}</td>
      <td>${d.nama}</td>
      <td>${d.tanggal}</td>
      <td>${rupiah(d.kas)}</td>
      <td>${rupiah(d.sampah)}</td>
      <td>${rupiah(d.kematian)}</td>
      <td>${rupiah(d.insidentil)}</td>
      <td>${rupiah(d.kredit)}</td>
      <td>${d.keterangan}</td>
      <td>${rupiah(d.kas+d.sampah+d.kematian+d.insidentil-d.kredit)}</td>
      <td>
        <button class="btn-warning" onclick="edit(${d.id})">Edit</button>
        <button class="btn-danger" onclick="hapus(${d.id})">Hapus</button>
      </td>
    </tr>`;
  });

  tabel.innerHTML=html;
  tKas.innerText=rupiah(tk);
  tSampah.innerText=rupiah(ts);
  tKematian.innerText=rupiah(tm);
  tInsidentil.innerText=rupiah(ti);
  tKredit.innerText=rupiah(tkred);
  tAll.innerText=rupiah(tk+ts+tm+ti-tkred);
}

bulan.addEventListener("change", render);
searchInput.addEventListener("input", render);

tampilkanApp();
</script>
// Import the functions you need from the SDKs you need

import { initializeApp } from "firebase/app";

import { getAnalytics } from "firebase/analytics";

// TODO: Add SDKs for Firebase products that you want to use

// https://firebase.google.com/docs/web/setup#available-libraries


// Your web app's Firebase configuration

// For Firebase JS SDK v7.20.0 and later, measurementId is optional

const firebaseConfig = {

  apiKey: "AIzaSyBxWSinv2P9QP76iH-dQNVV6KxG6JMx7pU",

  authDomain: "rute07-33647.firebaseapp.com",

  projectId: "rute07-33647",

  storageBucket: "rute07-33647.firebasestorage.app",

  messagingSenderId: "537180367984",

  appId: "1:537180367984:web:8c235cb1ab2fd3292458b5",

  measurementId: "G-P5B6B80M13"

};


// Initialize Firebase

const app = initializeApp(firebaseConfig);

const analytics = getAnalytics(app);
</body>
</html>

